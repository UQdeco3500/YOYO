<template>
  <div class="blood-oxygen">
    <div class="title">Blood Oxygen</div>
    <div class="icon">
      <svg
        width="42"
        height="42"
        viewBox="0 0 25 32"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g clip-path="url(#clip0_67_68)">
          <path
            d="M8.95269 23.089C8.57644 23.0795 8.20153 23.0404 7.8314 22.9721C6.11286 22.7068 4.54652 21.8338 3.41691 20.5117C2.2873 19.1897 1.66936 17.5064 1.67537 15.7675C1.67537 14.4725 2.51554 12.3878 3.97164 9.74409C4.47385 8.89759 5.03292 8.00056 5.59514 7.09721C6.48901 5.74535 7.4429 4.33979 8.33677 3.04478C8.52534 2.76893 8.73105 2.5052 8.95269 2.25514C9.12009 2.4794 9.34119 2.76051 9.5844 3.04478C10.532 4.33979 11.4795 5.69166 12.3229 7.09721C12.9546 7.9974 13.4442 8.89759 13.9495 9.74409C14.5081 10.709 15.0121 11.7045 15.4593 12.7258C15.5017 12.8303 15.5647 12.9253 15.6445 13.005C15.7244 13.0847 15.8195 13.1475 15.9241 13.1896C16.0287 13.2318 16.1408 13.2524 16.2536 13.2503C16.3664 13.2482 16.4776 13.2234 16.5806 13.1774C16.6846 13.1335 16.7787 13.0692 16.8575 12.9885C16.9364 12.9077 16.9983 12.812 17.0398 12.7071C17.0813 12.6021 17.1014 12.4899 17.099 12.3771C17.0966 12.2642 17.0718 12.153 17.026 12.0498C16.5576 10.969 16.0303 9.91453 15.4467 8.89128C14.916 7.94371 14.3538 7.0372 13.7695 6.13385C12.8809 4.73566 11.9481 3.36696 10.971 2.02773C10.633 1.57921 10.3014 1.12754 10.0234 0.789571C9.90973 0.675862 9.85604 0.565313 9.74233 0.451605C9.68863 0.394751 9.68863 0.337897 9.62862 0.337897C9.55072 0.23334 9.44946 0.148429 9.33293 0.0899337C9.2164 0.0314384 9.08781 0.000976563 8.95743 0.000976562C8.82704 0.000976563 8.69845 0.0314384 8.58192 0.0899337C8.46539 0.148429 8.36414 0.23334 8.28623 0.337897L8.17252 0.451605C8.09816 0.577238 8.00555 0.691135 7.89773 0.789571C7.6103 1.18123 7.26602 1.57921 6.95016 2.02773C6.00259 3.37959 5.05503 4.72829 4.14852 6.13385C3.56103 7.0372 3.00196 7.95634 2.47132 8.89128C0.895203 11.7687 0.00133018 14.1282 0.00133018 15.7643C-0.000313059 17.9025 0.75891 19.9715 2.14315 21.6011C3.5274 23.2307 5.44633 24.3146 7.55661 24.6588C8.01898 24.7272 8.48534 24.7652 8.95269 24.7725C9.16702 24.7594 9.36827 24.665 9.5154 24.5086C9.66252 24.3521 9.74444 24.1455 9.74444 23.9308C9.74444 23.716 9.66252 23.5094 9.5154 23.353C9.36827 23.1965 9.16702 23.1021 8.95269 23.089Z"
            fill="#FFFCFC"
          />
          <path
            d="M14.7741 13.7999C14.0881 13.7742 13.4051 13.9028 12.7753 14.1761C12.1456 14.4494 11.5852 14.8605 11.1354 15.3791C10.2416 16.4467 9.79305 17.8523 9.79305 19.5832C9.79305 21.2193 10.2416 22.568 11.0817 23.5251C11.5173 24.0098 12.0547 24.3922 12.6553 24.6451C13.2559 24.8979 13.905 25.0148 14.5562 24.9875C16.2913 24.9875 17.5789 24.4242 18.4191 23.2977C19.2592 22.1732 19.6478 20.7708 19.6478 19.0778C19.6478 17.3343 19.2024 15.9824 18.2517 15.0822C17.2914 14.2392 16.055 13.7784 14.7773 13.7872L14.7741 13.7999ZM17.0577 22.189C16.6124 23.0892 15.8291 23.5409 14.6541 23.5409C13.5833 23.5409 12.8126 23.146 12.3199 22.4259C11.7876 21.5766 11.5296 20.5842 11.5808 19.5832C11.5399 18.5434 11.7963 17.5135 12.3199 16.6141C12.8221 15.7708 13.6054 15.376 14.6699 15.376C15.9017 15.376 16.7419 15.8845 17.2441 16.8384C17.5726 17.4606 17.6894 18.2471 17.6894 19.2673C17.7416 20.283 17.5236 21.2944 17.0577 22.1985V22.189ZM24.733 23.8188C24.5815 23.7211 24.4076 23.6635 24.2277 23.6514H21.9345C21.9914 23.6514 22.102 23.484 22.1588 23.4272C22.4221 23.1248 22.7249 22.8592 23.059 22.6375C23.5044 22.2996 23.7855 22.0058 24.0066 21.8479C24.2191 21.6429 24.4058 21.4127 24.5625 21.1625C24.7466 20.8563 24.8438 20.5058 24.8436 20.1486C24.8335 19.9205 24.7953 19.6945 24.7299 19.4758C24.629 19.2806 24.5161 19.0918 24.3919 18.9104C24.2296 18.7485 24.0404 18.616 23.8328 18.5188C23.4735 18.3877 23.0941 18.3203 22.7116 18.3198C22.3875 18.3133 22.0654 18.3713 21.764 18.4903C21.5127 18.5928 21.2848 18.7454 21.0944 18.9388C20.9103 19.1105 20.776 19.3288 20.7059 19.5706C20.6131 19.7675 20.5729 19.9851 20.589 20.2023C20.5867 20.2758 20.6005 20.3489 20.6294 20.4166C20.6583 20.4842 20.7017 20.5448 20.7564 20.5939C20.7985 20.6432 20.8502 20.6834 20.9083 20.7122C20.9663 20.741 21.0297 20.7577 21.0944 20.7613C21.1699 20.7581 21.2437 20.738 21.3104 20.7024C21.377 20.6669 21.4349 20.6169 21.4797 20.556C21.587 20.4251 21.6636 20.2719 21.704 20.1075C21.7608 19.9401 21.8177 19.7695 21.8714 19.7695C21.962 19.6137 22.0927 19.485 22.2499 19.3967C22.4071 19.3084 22.585 19.2637 22.7652 19.2673C22.9377 19.2775 23.1074 19.3159 23.2675 19.381C23.3475 19.4057 23.4203 19.4497 23.4792 19.5092C23.5382 19.5687 23.5816 19.6419 23.6054 19.7222C23.6964 19.8741 23.7363 20.0513 23.7191 20.2275C23.7085 20.401 23.6701 20.5716 23.6054 20.7329C23.5129 20.915 23.3995 21.0856 23.2675 21.2414C23.0821 21.4391 22.8693 21.6093 22.6357 21.7468C22.522 21.8637 22.3009 22.0279 21.9661 22.3122C21.6313 22.5965 21.2965 22.9439 20.9017 23.3261C20.7954 23.4472 20.7013 23.5783 20.6206 23.7177C20.5811 23.8437 20.5515 23.9725 20.5321 24.1031C20.5367 24.268 20.5955 24.4268 20.6996 24.5548C20.7677 24.6148 20.8474 24.6603 20.9338 24.6885C21.0201 24.7168 21.1113 24.7271 21.2018 24.719H24.3824C24.5477 24.7251 24.7087 24.6661 24.8309 24.5548C24.8853 24.5046 24.9283 24.4434 24.9571 24.3754C24.986 24.3073 25.0001 24.2339 24.9984 24.1599C24.9004 24.0999 24.8467 23.9325 24.733 23.8188Z"
            fill="#FFFCFC"
          />
        </g>
        <defs>
          <clipPath id="clip0_67_68">
            <rect width="42" height="42" fill="white" />
          </clipPath>
        </defs>
      </svg>
    </div>

    <div class="num">{{ oxygen || "--" }}%</div>
  </div>
</template>

<script>
export default {
  name: "blood-oxygen",
  props: {},
  data() {
    return {
      oxygen: 0,
      timer: null,
    };
  },
  methods: {
    getNum() {
      const time = Math.floor(Math.random() * 5) + 1;

      setTimeout(() => {
        this.timer = setInterval(() => {
          const oxygen = Math.floor(Math.random() * (100 - 98)) + 97;
          this.oxygen = oxygen;
        }, 2000);
      }, time * 1000);

      this.$once("hook:beforeDestroy", function () {
        clearInterval(this.timer);
      });
    },
  },
  mounted() {
    this.getNum();
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped lang="less">
.blood-oxygen {
  position: absolute;
  width: 100%;
  left: 0;
  top: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;

  .title {
    font-size: 15px;
    color: #000;
  }

  .icon {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: #fc6f6f;
    margin: 20px auto;
    box-shadow: 0 0 5px #ccc;
    line-height: 105px;
    text-align: center;
    animation: donghua 2.4s infinite;
  }

  .num {
    font-size: 15px;
  }

  @keyframes donghua {
    0% {
      transform: scale(0.6);
      /* 注意rgba中的a的设置 */
      box-shadow: 0 0 0 0 rgba(252, 111, 111, 60%);
    }

    60% {
      transform: scale(1);
      box-shadow: 0 0 0 36px rgba(204, 73, 152, 0%);
    }

    100% {
      transform: scale(0.6);
      box-shadow: 0 0 0 0 rgba(204, 73, 152, 0%);
    }
  }
}
</style>
